<?php

namespace Database\Seeders;

use App\Models\Schedule;
use Carbon\Carbon;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class ScheduleSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $timeStrings = [
            "07:00-09:15", "16:00-18:15", "18:15-20:30", "16:45-18:15", "7:00-9:15",
            "10:45-13:00", "9:15-11:30", "13:45-16:00", "19:45-21:15", "19:45-22:00",
            "20:30-22:00", "12:15-13:45", "19:00-21:15", "09:15-11:30", "16:00-17:30",
            "15:15-16:45", "11:30-13:45", "10:00-1215:", "15:15-17:30", "20:30-22:45",
            "11:30-13:45", "13:45-15:15", "15:15-16:45", "14:30-16:00", "16:45-18:15",
            "18:15-19:45", "16:00-1815:", "1215-13::45", "13:00-14:30", "10:00-11:30",
            "16:00-17:30", "15:15-16:45", "16:45-18:15", "14:30-16:00", "12:15-13:45",
            "11:30-13:00", "18:15-19:45", "18:26-19:45", "18:15-19:45", "19:45-21:15",
            "20:30-22:00", "10:00-11:30", "1515-16::45", "13:45-15:15", "16:45-18:15",
            "07:00-08:30", "07:00-09:15", "09:15-11:30", "16:00-18:15", "21:15-22:45",
            "19:00-20:30", "16:00-18:15", "18:15-20:30", "10:00-11:30", "8:30-10:00",
            /*"13:45-16:00", "7:00-8:30", "18:15-19:45", "21:15-22:45", "19:45-22:45",
            "10:00-12:15", "21:15-22:45", "18:15-19:45", "14:30-16:45", "7:00-8:30",
            "8:30-10:00", "7:00-9:15", "9:15-11:30", "16:45-19:00", "9:15-11:30",
            "10:00-11:30", "9:15-11:30", "7:00-9:15", "9:15-11:30", "7:00-8:30",
            "18:15-20:30", "19:00-21:15", "10:00-11:30", "9:15-11:30", "19:00-20:30",
            "18:15-20:30", "10:00-11:30", "7:00-8:30", "7:00-9:15", "19:45-22:00",
            "8:30-11:30", ":00-830:", "16:45-18:15", "19:45-21:15", "7:00-915:",
            "16:45-1815:", "16:00-18:15", "16:00-17:30", "9:15-11:30", "7:00-9:15",
            "21:15-22:45", "19:00-21:15", "7:00-8:30", "18:15-20:30", "18:15-19:45",
            "18:15-20:30", "09:15-11:30", "15:15-16:45", "1515-16::45", "10:00-1215:",
            "13:00-16:00", "13:45-1515:", "13:00-15:15", "18:15-19:45", "18:15-19:45",
            "16:45-1815:", "7:00-915:", "10:00-11:30", "16:00-18:15", "11:30-13:45",
            "8:30-10:00", "16:00-18:15", "18:15-19:45", "21:15-22:45", "19:45:21:15",*/
        ];

        $uniqueSchedules = [];
        foreach ($timeStrings as $raw) {
            $cleaned = str_replace([':', ' '], '', $raw); // Remove colons and spaces
            $cleaned = preg_replace('/(\d{2})(\d{2})/', '$1:$2', $cleaned); // Add colons back
            $parts = explode('-', $cleaned);

            if (count($parts) === 2) {
                try {
                    $start = Carbon::parse($parts[0])->format('H:i:s');
                    $end = Carbon::parse($parts[1])->format('H:i:s');
                    $key = "$start-$end";

                    if (!isset($uniqueSchedules[$key])) {
                        $uniqueSchedules[$key] = ['start' => $start, 'end' => $end];
                    }
                } catch (\Exception $e) {
                    // Skip invalid formats like ":00-830:"
                }
            }
        }

        foreach ($uniqueSchedules as $schedule) {
            Schedule::firstOrCreate($schedule);
        }
    }
}
